"use strict";(self.webpackChunkStudyApp=self.webpackChunkStudyApp||[]).push([[236],{6236:(Q,h,a)=>{a.r(h),a.d(h,{QuizSelectionModule:()=>U});var c=a(177),f=a(7513),p=a(7166),r=function(t){return t.INVALID_FILE_TYPE="Invalid file type. Please upload a JSON file.",t.FILE_ALREADY_UPLOADED="This file has already been uploaded.",t.JSON_PARSE_ERROR="Error parsing JSON file. Please upload a valid JSON file.",t.INVALID_QUIZ_FORMAT_MISSING_QUESTIONS='Invalid quiz format: "questions" property is missing or is not an array.',t.QUIZ_CONTAINS_NO_QUESTIONS="The quiz file contains no questions.",t.INVALID_QUIZ_FORMAT_MISSING_PROPERTIES='Invalid quiz format: Each question must have "prompt", "options", and "answer" properties.',t.INVALID_QUIZ_FORMAT_INSUFFICIENT_OPTIONS="Invalid quiz format: Each question must have at least two options.",t.INVALID_QUIZ_FORMAT_ANSWER_NOT_IN_OPTIONS="Invalid quiz format: Each question's answer must be one of its options.",t.EXCEEDS_QUESTION_LIMIT="Cannot add any more questions: Total number of questions exceeds the limit of ",t.MAX_QUESTIONS_REACHED="Cannot add any more questions: Max number of questions has been reached.",t}(r||{}),e=a(8699),_=a(6629),u=a(4341);let S=(()=>{class t{transform(s,n){return s?(s=s.trim()).length>n?s.substring(0,n)+"...":s:""}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275pipe=e.EJ8({name:"truncate",type:t,pure:!0})}}return t})();const g=["fileInput"];function M(t,d){if(1&t&&(e.j41(0,"div",18)(1,"h6",19),e.EFF(2),e.k0s()()),2&t){const s=e.XpG();e.R7$(2),e.SpI(" ",s.errorMessage," ")}}function N(t,d){if(1&t){const s=e.RV6();e.j41(0,"li",24)(1,"div",25)(2,"span",26),e.EFF(3),e.nI1(4,"truncate"),e.k0s(),e.j41(5,"img",27),e.bIt("click",function(){const o=e.eBV(s).$implicit,l=e.XpG(2);return e.Njj(l.removeFile(o.key))}),e.k0s()()()}if(2&t){const s=d.$implicit,n=e.XpG(2);e.R7$(3),e.Lme("",e.i5U(4,2,s.key,n.TRUNCATE_LIMIT)," - Questions: ",s.value.length,"")}}function T(t,d){if(1&t&&(e.j41(0,"div",20)(1,"h3",21),e.EFF(2,"Uploaded Files:"),e.k0s(),e.j41(3,"ul",22),e.DNE(4,N,6,5,"li",23),e.nI1(5,"keyvalue"),e.k0s()()),2&t){const s=e.XpG();e.R7$(4),e.Y8G("ngForOf",e.bMT(5,1,s.quizzes))}}function E(t,d){if(1&t&&(e.j41(0,"div",28)(1,"h4",29),e.EFF(2),e.k0s()()),2&t){const s=e.XpG();e.R7$(2),e.SpI("Loaded Questions: ",s.questions.length,"")}}function v(t,d){if(1&t&&(e.j41(0,"span",30),e.EFF(1),e.k0s()),2&t){const s=e.XpG();e.R7$(1),e.Lme("Minutes must be between ",s.MIN_MINUTES," and ",s.MAX_MINUTES,"")}}const A=function(t){return{"invalid-input-field":t}},O=[{path:"",component:(()=>{class t{constructor(s,n){this.quizService=s,this.router=n,this.MAX_QUESTIONS=100,this.TRUNCATE_LIMIT=35,this.MIN_MINUTES=5,this.MAX_MINUTES=120,this.questions=[],this.quizzes=new Map,this.errorMessage="",this.minutes=30,this.quizService.setQuestions([])}onFileSelected(s){const n=s.target;if(!n.files||!n.files?.length)return void(this.errorMessage="");const i=Array.from(n.files);for(const o of i)if(this.errorMessage=this.validateFile(o),this.errorMessage)return;for(const o of i){const l=new FileReader;l.readAsText(o),l.onload=()=>{try{const I=JSON.parse(l.result);if(this.errorMessage=this.validateQuiz(I),this.errorMessage)return;const m=I.questions.map(z=>new p.v(z));this.questions.push(...m),this.quizzes.set(o.name,m),this.questions.length>=this.MAX_QUESTIONS&&(this.errorMessage=r.MAX_QUESTIONS_REACHED)}catch(I){console.error("Error parsing JSON:",I),this.errorMessage=r.JSON_PARSE_ERROR}}}}validateFile(s){let n="";return"application/json"===s.type||s.name.endsWith(".json")?this.quizzes.has(s.name)&&(n=r.FILE_ALREADY_UPLOADED):n=r.INVALID_FILE_TYPE,n}validateQuiz(s){let n="";switch(!0){case!s.questions||!Array.isArray(s.questions):n=r.INVALID_QUIZ_FORMAT_MISSING_QUESTIONS;break;case 0===s.questions.length:n=r.QUIZ_CONTAINS_NO_QUESTIONS;break;case!s.questions.every(i=>i.prompt&&i.options&&i.answer):n=r.INVALID_QUIZ_FORMAT_MISSING_PROPERTIES;break;case!s.questions.every(i=>Array.isArray(i.options)&&i.options.length>=2):n=r.INVALID_QUIZ_FORMAT_INSUFFICIENT_OPTIONS;break;case!s.questions.every(i=>i.options.includes(i.answer)):n=r.INVALID_QUIZ_FORMAT_ANSWER_NOT_IN_OPTIONS;break;case this.questions.length+s.questions.length>this.MAX_QUESTIONS:n=`${r.EXCEEDS_QUESTION_LIMIT}${this.MAX_QUESTIONS}.`}return n}clearFiles(){0!==this.quizzes.size&&(this.quizzes.clear(),this.questions=[],this.errorMessage="",this.fileInput.nativeElement.value="")}startQuiz(){0===this.questions.length||this.minutes<this.MIN_MINUTES||this.minutes>this.MAX_MINUTES||(this.quizService.setQuestions(this.questions),this.quizService.setMinutes(this.minutes),this.router.navigate(["/quiz"]))}removeFile(s){const n=this.quizzes.get(s);n&&(this.questions=this.questions.filter(i=>!n.includes(i)),this.quizzes.delete(s),this.errorMessage="",this.fileInput.nativeElement.value="")}static{this.\u0275fac=function(n){return new(n||t)(e.rXU(_.p),e.rXU(f.Ix))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-quiz-selection"]],viewQuery:function(n,i){if(1&n&&e.GBs(g,5),2&n){let o;e.mGM(o=e.lsd())&&(i.fileInput=o.first)}},decls:22,vars:13,consts:[[1,"grid"],[1,"row"],[1,"col-12","h1","text-center","my-3"],[1,"col-12","offset-md-2","col-md-8","offset-lg-3","col-lg-6","d-flex","justify-content-center"],["type","file","accept",".json","multiple","",1,"form-control","my-3",3,"disabled","change"],["fileInput",""],["class","text-center text-danger",4,"ngIf"],["class","col-12 offset-md-2 col-md-8 offset-lg-3 col-lg-6",4,"ngIf"],["class","text-center my-3",4,"ngIf"],[1,"col-12","offset-md-2","col-md-4","my-3","pe-0"],[1,"d-flex","justify-content-start","justify-content-md-end","align-items-center","mb-2"],["for","quiz-duration",1,"form-label","mb-0","me-2","h6"],["id","quiz-duration","type","number","step","5",1,"form-control","focus-ring","px-1","px-lg-2","w-25",3,"ngClass","ngModel","min","max","ngModelChange"],[1,"d-flex","justify-content-start","justify-content-md-end"],["class","text-danger",4,"ngIf"],[1,"col-12","col-md-4","d-flex","justify-content-end","justify-content-md-start","my-3","ps-0"],[1,"btn","btn-secondary","btn-fixed-height","mx-3",3,"disabled","click"],[1,"btn","btn-primary","btn-fixed-height",3,"disabled","click"],[1,"text-center","text-danger"],[1,"h6"],[1,"col-12","offset-md-2","col-md-8","offset-lg-3","col-lg-6"],[1,"h3"],[1,"list-group","rounded-0"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-wrap"],["src","assets/icons/trash-solid-red-full.svg","alt","Trash Icon",1,"trash",3,"click"],[1,"text-center","my-3"],[1,"h4"],[1,"text-danger"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"h1",2),e.EFF(3,"Select a Quiz JSON File"),e.k0s(),e.j41(4,"div",3)(5,"input",4,5),e.bIt("change",function(l){return i.onFileSelected(l)}),e.k0s()(),e.DNE(7,M,3,1,"div",6),e.DNE(8,T,6,3,"div",7),e.DNE(9,E,3,1,"div",8),e.j41(10,"div",9)(11,"div",10)(12,"label",11),e.EFF(13,"Quiz Duration in Minutes:"),e.k0s(),e.j41(14,"input",12),e.bIt("ngModelChange",function(l){return i.minutes=l}),e.k0s()(),e.j41(15,"div",13),e.DNE(16,v,2,2,"span",14),e.k0s()(),e.j41(17,"div",15)(18,"button",16),e.bIt("click",function(){return i.clearFiles()}),e.EFF(19,"Clear Files"),e.k0s(),e.j41(20,"button",17),e.bIt("click",function(){return i.startQuiz()}),e.EFF(21,"Start Quiz"),e.k0s()()()()),2&n&&(e.R7$(5),e.Y8G("disabled",i.questions.length>=i.MAX_QUESTIONS),e.R7$(2),e.Y8G("ngIf",i.errorMessage),e.R7$(1),e.Y8G("ngIf",i.quizzes.size>0),e.R7$(1),e.Y8G("ngIf",i.questions.length>0),e.R7$(5),e.Y8G("ngClass",e.eq3(11,A,i.minutes<i.MIN_MINUTES||i.minutes>i.MAX_MINUTES))("ngModel",i.minutes)("min",i.MIN_MINUTES)("max",i.MAX_MINUTES),e.R7$(2),e.Y8G("ngIf",i.minutes<i.MIN_MINUTES||i.minutes>i.MAX_MINUTES),e.R7$(2),e.Y8G("disabled",0===i.quizzes.size),e.R7$(2),e.Y8G("disabled",0===i.questions.length||i.minutes<i.MIN_MINUTES||i.minutes>i.MAX_MINUTES))},dependencies:[c.YU,c.Sq,c.bT,u.me,u.Q0,u.BC,u.VZ,u.zX,u.vS,c.lG,S],styles:[".trash[_ngcontent-%COMP%]{width:1.25rem;height:1.25rem}.trash[_ngcontent-%COMP%]:hover{cursor:pointer}.btn-fixed-height[_ngcontent-%COMP%]{height:38px}.invalid-input-field[_ngcontent-%COMP%]{border:1px solid #dc3545;--bs-focus-ring-color: rgba(255, 0, 0, .25)}"]})}}return t})()}];let F=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({imports:[f.iI.forChild(O),f.iI]})}}return t})();var y=a(541);let U=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({imports:[c.MD,F,y.G]})}}return t})()}}]);