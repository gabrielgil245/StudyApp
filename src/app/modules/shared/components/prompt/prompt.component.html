<div *ngIf="question" class="my-3">
    <div class="grid pb-1 border-bottom">
        <div class="row h6">
            <div class="col-10 d-flex flex-wrap justify-content-start align-content-end">
                <span>{{ question.prompt }}</span>
            </div>
            <div class="col-2 d-flex flex-wrap justify-content-end align-content-end">
                <span id="question-{{index + 1}}">Question {{ index + 1 }} of {{ totalQuestions
                    }}</span>
            </div>
        </div>
    </div>
    <div *ngIf="question.code" class="my-3">
        <!-- Set pre, ng-container, and code tags in one line to prevent unintended whitespace -->
        <pre class="bg-dark p-3 m-0"><ng-container *ngFor="let line of codeLines; let i = index"><code class="text-white">{{ i + 1 }}. {{ line }}</code></ng-container></pre>
    </div>
    <ul class="my-3 list-unstyled">
        <ng-container *ngFor="let option of question.options; let i = index">
            <div class="my-3">
                <input id="radio-{{index}}-{{i}}" class="form-check-input pointer" type="radio"
                    [disabled]="!enableQuizNavigation" [(ngModel)]="question.response" [value]="option" />
                <label class="ms-3" for="radio-{{index}}-{{i}}"
                    [ngClass]="{'pointer': enableQuizNavigation, 'text-success': !enableQuizNavigation && option === question.answer, 'fw-bold': !enableQuizNavigation && (option === question.answer || option === question.response), 'text-danger': !enableQuizNavigation && option === question.response && question.response !== question.answer }">
                    {{ option }}
                </label>
            </div>
        </ng-container>
    </ul>
    <div *ngIf="enableQuizNavigation; else enableResultsDetails" class="my-3 d-flex justify-content-end">
        <button class="btn btn-secondary me-2" (click)="clearSelection()" [disabled]="!question.response">Clear</button>
        <button class="btn btn-outline-secondary me-2" (click)="goBack()" [disabled]="index <= 0">Back</button>
        <button class="btn btn-outline-secondary me-2" (click)="goForward()"
            [disabled]="index >= totalQuestions - 1">Forward</button>
        <button class="btn btn-primary" [disabled]="!question.response" (click)="confirmResponse()">Submit
            Response</button>
    </div>
    <ng-template #enableResultsDetails>
        <div class="grid mt-3">
            <div class="row">
                <div class="col-6 mb-3 d-flex justify-content-center">
                    <span class="fw-bold">Category:&nbsp;</span>
                    <span class="fst-italic">{{ question.category }}</span>
                </div>
                <div class="col-6 mb-3 d-flex justify-content-center">
                    <span class="fw-bold">Difficulty:&nbsp;</span>
                    <span class="fst-italic">{{ question.difficulty }}</span>
                </div>
                <div class="col-12 mb-3 d-flex justify-content-center">
                    <span class="fw-bold">Explanation:&nbsp;</span>
                    <span class="fst-italic">{{ question.explanation }}</span>
                </div>
            </div>
        </div>
    </ng-template>
</div>