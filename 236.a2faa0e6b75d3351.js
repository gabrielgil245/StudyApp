"use strict";(self.webpackChunkStudyApp=self.webpackChunkStudyApp||[]).push([[236],{6236:(z,d,a)=>{a.r(d),a.d(d,{QuizSelectionModule:()=>F});var c=a(177),I=a(7513),m=a(7166),r=function(t){return t.INVALID_FILE_TYPE="Invalid file type. Please upload a JSON file.",t.FILE_ALREADY_UPLOADED="This file has already been uploaded.",t.JSON_PARSE_ERROR="Error parsing JSON file. Please upload a valid JSON file.",t.INVALID_QUIZ_FORMAT_MISSING_QUESTIONS='Invalid quiz format: "questions" property is missing or is not an array.',t.QUIZ_CONTAINS_NO_QUESTIONS="The quiz file contains no questions.",t.INVALID_QUIZ_FORMAT_MISSING_PROPERTIES='Invalid quiz format: Each question must have "prompt", "options", and "answer" properties.',t.INVALID_QUIZ_FORMAT_INSUFFICIENT_OPTIONS="Invalid quiz format: Each question must have at least two options.",t.INVALID_QUIZ_FORMAT_ANSWER_NOT_IN_OPTIONS="Invalid quiz format: Each question's answer must be one of its options.",t.EXCEEDS_QUESTION_LIMIT="Cannot add any more questions: Total number of questions exceeds the limit of ",t.MAX_QUESTIONS_REACHED="Cannot add any more questions: Max number of questions has been reached.",t}(r||{}),e=a(8699),f=a(6629),u=a(4341);let p=(()=>{class t{transform(i,n){return i?(i=i.trim()).length>n?i.substring(0,n)+"...":i:""}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275pipe=e.EJ8({name:"truncate",type:t,pure:!0})}}return t})();const _=["fileInput"];function M(t,h){if(1&t&&(e.j41(0,"div",18)(1,"h6",19),e.EFF(2),e.k0s()()),2&t){const i=e.XpG();e.R7$(2),e.SpI(" ",i.errorMessage," ")}}function S(t,h){if(1&t){const i=e.RV6();e.j41(0,"li",24)(1,"div",25)(2,"span",26),e.EFF(3),e.nI1(4,"truncate"),e.k0s(),e.j41(5,"img",27),e.bIt("click",function(){const o=e.eBV(i).$implicit,l=e.XpG(2);return e.Njj(l.removeFile(o.key))}),e.k0s()()()}if(2&t){const i=h.$implicit,n=e.XpG(2);e.R7$(3),e.Lme("",e.i5U(4,2,i.key,n.TRUNCATE_LIMIT)," - Questions: ",i.value.length,"")}}function g(t,h){if(1&t&&(e.j41(0,"div",20)(1,"h3",21),e.EFF(2,"Uploaded Files:"),e.k0s(),e.j41(3,"ul",22),e.DNE(4,S,6,5,"li",23),e.nI1(5,"keyvalue"),e.k0s()()),2&t){const i=e.XpG();e.R7$(4),e.Y8G("ngForOf",e.bMT(5,1,i.quizzes))}}function N(t,h){if(1&t&&(e.j41(0,"div",28)(1,"h4",29),e.EFF(2),e.k0s()()),2&t){const i=e.XpG();e.R7$(2),e.SpI("Loaded Questions: ",i.questions.length,"")}}function T(t,h){if(1&t&&(e.j41(0,"span",30),e.EFF(1),e.k0s()),2&t){const i=e.XpG();e.R7$(1),e.Lme("Minutes must be between ",i.MIN_MINUTES," and ",i.MAX_MINUTES,"")}}const E=function(t){return{"invalid-input-field":t}},v=[{path:"",component:(()=>{class t{constructor(i,n){this.quizService=i,this.router=n,this.MAX_QUESTIONS=100,this.TRUNCATE_LIMIT=35,this.MIN_MINUTES=5,this.MAX_MINUTES=120,this.questions=[],this.quizzes=new Map,this.errorMessage="",this.minutes=30}ngOnInit(){this.quizService.setQuestions([])}onFileSelected(i){const n=i.target;if(!n.files||!n.files?.length)return void(this.errorMessage="");const s=Array.from(n.files);for(const o of s)if(this.errorMessage=this.validateFile(o),this.errorMessage)return;for(const o of s){const l=new FileReader;l.readAsText(o),l.onload=()=>{try{this.parseQuizFile(l.result,o.name)}catch(U){console.error("Error parsing JSON:",U),this.errorMessage=r.JSON_PARSE_ERROR}}}}validateFile(i){let n="";return"application/json"===i.type&&i.name.endsWith(".json")?this.quizzes.has(i.name)&&(n=r.FILE_ALREADY_UPLOADED):n=r.INVALID_FILE_TYPE,n}parseQuizFile(i,n){const s=JSON.parse(i);if(this.errorMessage=this.validateQuiz(s),this.errorMessage)return;const o=s.questions.map(l=>new m.v(l));this.questions.push(...o),this.quizzes.set(n,o),this.questions.length>=this.MAX_QUESTIONS&&(this.errorMessage=r.MAX_QUESTIONS_REACHED)}validateQuiz(i){let n="";switch(!0){case!i.questions||!Array.isArray(i.questions):n=r.INVALID_QUIZ_FORMAT_MISSING_QUESTIONS;break;case 0===i.questions.length:n=r.QUIZ_CONTAINS_NO_QUESTIONS;break;case!i.questions.every(s=>s.prompt&&s.options&&s.answer):n=r.INVALID_QUIZ_FORMAT_MISSING_PROPERTIES;break;case!i.questions.every(s=>Array.isArray(s.options)&&s.options.length>=2):n=r.INVALID_QUIZ_FORMAT_INSUFFICIENT_OPTIONS;break;case!i.questions.every(s=>s.options.includes(s.answer)):n=r.INVALID_QUIZ_FORMAT_ANSWER_NOT_IN_OPTIONS;break;case this.questions.length+i.questions.length>this.MAX_QUESTIONS:n=`${r.EXCEEDS_QUESTION_LIMIT}${this.MAX_QUESTIONS}.`}return n}onMinutesChange(){this.minutes>this.MIN_MINUTES&&this.minutes<this.MAX_MINUTES&&this.minutes%5==0||(this.minutes=this.minutes>this.MAX_MINUTES?this.MAX_MINUTES:this.minutes<this.MIN_MINUTES?this.MIN_MINUTES:5*Math.round(this.minutes/5))}clearFiles(){0!==this.quizzes.size&&(this.quizzes.clear(),this.questions=[],this.errorMessage="",this.fileInput.nativeElement.value="")}startQuiz(){0===this.questions.length||this.minutes<this.MIN_MINUTES||this.minutes>this.MAX_MINUTES||(this.quizService.setQuestions(this.questions),this.quizService.setMinutes(this.minutes),this.router.navigate(["/quiz"]))}removeFile(i){const n=this.quizzes.get(i);n&&(this.questions=this.questions.filter(s=>!n.includes(s)),this.quizzes.delete(i),this.errorMessage="",this.fileInput.nativeElement.value="")}static{this.\u0275fac=function(n){return new(n||t)(e.rXU(f.p),e.rXU(I.Ix))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-quiz-selection"]],viewQuery:function(n,s){if(1&n&&e.GBs(_,5),2&n){let o;e.mGM(o=e.lsd())&&(s.fileInput=o.first)}},decls:22,vars:13,consts:[[1,"grid"],[1,"row"],[1,"col-12","h1","text-center","my-3"],[1,"col-12","offset-md-2","col-md-8","offset-lg-3","col-lg-6","d-flex","justify-content-center"],["type","file","accept",".json","multiple","",1,"form-control","my-3",3,"disabled","change"],["fileInput",""],["class","text-center text-danger",4,"ngIf"],["class","col-12 offset-md-2 col-md-8 offset-lg-3 col-lg-6",4,"ngIf"],["class","text-center my-3",4,"ngIf"],[1,"col-12","offset-md-2","col-md-4","my-3","pe-0"],[1,"d-flex","justify-content-start","justify-content-md-end","align-items-center","mb-2"],["for","quiz-duration",1,"form-label","mb-0","me-2","h6"],["id","quiz-duration","type","number","step","5",1,"form-control","focus-ring","px-1","px-lg-2","w-25",3,"ngClass","ngModel","min","max","ngModelChange","blur"],[1,"d-flex","justify-content-start","justify-content-md-end"],["class","text-danger",4,"ngIf"],[1,"col-12","col-md-4","d-flex","justify-content-end","justify-content-md-start","my-3","ps-0"],[1,"btn","btn-secondary","btn-fixed-height","mx-3",3,"disabled","click"],[1,"btn","btn-primary","btn-fixed-height",3,"disabled","click"],[1,"text-center","text-danger"],[1,"h6"],[1,"col-12","offset-md-2","col-md-8","offset-lg-3","col-lg-6"],[1,"h3"],[1,"list-group","rounded-0"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-wrap"],["src","assets/icons/trash-solid-red-full.svg","alt","Trash Icon",1,"trash",3,"click"],[1,"text-center","my-3"],[1,"h4"],[1,"text-danger"]],template:function(n,s){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"h1",2),e.EFF(3,"Select a Quiz JSON File"),e.k0s(),e.j41(4,"div",3)(5,"input",4,5),e.bIt("change",function(l){return s.onFileSelected(l)}),e.k0s()(),e.DNE(7,M,3,1,"div",6),e.DNE(8,g,6,3,"div",7),e.DNE(9,N,3,1,"div",8),e.j41(10,"div",9)(11,"div",10)(12,"label",11),e.EFF(13,"Quiz Duration in Minutes:"),e.k0s(),e.j41(14,"input",12),e.bIt("ngModelChange",function(l){return s.minutes=l})("blur",function(){return s.onMinutesChange()}),e.k0s()(),e.j41(15,"div",13),e.DNE(16,T,2,2,"span",14),e.k0s()(),e.j41(17,"div",15)(18,"button",16),e.bIt("click",function(){return s.clearFiles()}),e.EFF(19,"Clear Files"),e.k0s(),e.j41(20,"button",17),e.bIt("click",function(){return s.startQuiz()}),e.EFF(21,"Start Quiz"),e.k0s()()()()),2&n&&(e.R7$(5),e.Y8G("disabled",s.questions.length>=s.MAX_QUESTIONS),e.R7$(2),e.Y8G("ngIf",s.errorMessage),e.R7$(1),e.Y8G("ngIf",s.quizzes.size>0),e.R7$(1),e.Y8G("ngIf",s.questions.length>0),e.R7$(5),e.Y8G("ngClass",e.eq3(11,E,s.minutes<s.MIN_MINUTES||s.minutes>s.MAX_MINUTES))("ngModel",s.minutes)("min",s.MIN_MINUTES)("max",s.MAX_MINUTES),e.R7$(2),e.Y8G("ngIf",s.minutes<s.MIN_MINUTES||s.minutes>s.MAX_MINUTES),e.R7$(2),e.Y8G("disabled",0===s.quizzes.size),e.R7$(2),e.Y8G("disabled",0===s.questions.length||s.minutes<s.MIN_MINUTES||s.minutes>s.MAX_MINUTES))},dependencies:[c.YU,c.Sq,c.bT,u.me,u.Q0,u.BC,u.VZ,u.zX,u.vS,c.lG,p],styles:[".trash[_ngcontent-%COMP%]{width:1.25rem;height:1.25rem}.trash[_ngcontent-%COMP%]:hover{cursor:pointer}.btn-fixed-height[_ngcontent-%COMP%]{height:38px}.invalid-input-field[_ngcontent-%COMP%]{border:1px solid #dc3545;--bs-focus-ring-color: rgba(255, 0, 0, .25)}"]})}}return t})()}];let A=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({imports:[I.iI.forChild(v),I.iI]})}}return t})();var O=a(541);let F=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({imports:[c.MD,A,O.G]})}}return t})()}}]);