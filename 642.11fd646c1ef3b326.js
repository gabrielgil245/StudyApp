"use strict";(self.webpackChunkStudyApp=self.webpackChunkStudyApp||[]).push([[642],{5642:(F,f,a)=>{a.r(f),a.d(f,{QuizSelectionModule:()=>T});var u=a(177),I=a(8426),h=a(7166),o=function(t){return t.NO_FILE_SELECTED="No file selected.",t.MULTIPLE_FILES_SELECTED="Please select only one file at a time.",t.INVALID_FILE_TYPE="Invalid file type. Please upload a JSON file.",t.FILE_ALREADY_UPLOADED="This file has already been uploaded.",t.JSON_PARSE_ERROR="Error parsing JSON file. Please upload a valid JSON file.",t.INVALID_QUIZ_FORMAT_MISSING_QUESTIONS='Invalid quiz format: "questions" property is missing or is not an array.',t.QUIZ_CONTAINS_NO_QUESTIONS="The quiz file contains no questions.",t.INVALID_QUIZ_FORMAT_MISSING_PROPERTIES='Invalid quiz format: Each question must have "prompt", "options", and "answer" properties.',t.INVALID_QUIZ_FORMAT_INSUFFICIENT_OPTIONS="Invalid quiz format: Each question must have at least two options.",t.INVALID_QUIZ_FORMAT_ANSWER_NOT_IN_OPTIONS="Invalid quiz format: Each question's answer must be one of its options.",t.EXCEEDS_QUESTION_LIMIT="Cannot add any more questions: Total number of questions exceeds the limit of ",t.MAX_QUESTIONS_REACHED="Cannot add any more questions: Max number of questions has been reached.",t}(o||{}),e=a(540),d=a(6629);function S(t,c){if(1&t&&(e.j41(0,"div",11)(1,"h6",12),e.EFF(2),e.k0s()()),2&t){const i=e.XpG();e.R7$(2),e.SpI(" ",i.errorMessage," ")}}function p(t,c){if(1&t&&(e.j41(0,"li",17),e.EFF(1),e.k0s()),2&t){const i=c.$implicit;e.R7$(1),e.SpI(" ",i," ")}}function _(t,c){if(1&t&&(e.j41(0,"div",13)(1,"h3",14),e.EFF(2,"Uploaded Files:"),e.k0s(),e.j41(3,"ul",15),e.DNE(4,p,2,1,"li",16),e.k0s()()),2&t){const i=e.XpG();e.R7$(4),e.Y8G("ngForOf",i.files)}}function E(t,c){if(1&t&&(e.j41(0,"div",18)(1,"h4",19),e.EFF(2),e.k0s()()),2&t){const i=e.XpG();e.R7$(2),e.SpI("Loaded Questions: ",i.questions.length,"")}}const N=[{path:"",component:(()=>{class t{constructor(i,s){this.quizService=i,this.router=s,this.MAX_QUESTIONS=100,this.questions=[],this.files=[],this.errorMessage="",this.quizService.setQuestions([]),this.quizService.setIsQuizActive(!1)}onFileSelected(i){const s=i.target;if(!s.files||!s.files?.length)return void(this.errorMessage=o.NO_FILE_SELECTED);if(s.files.length>1)return void(this.errorMessage=o.MULTIPLE_FILES_SELECTED);const n=s.files[0];if(this.errorMessage=this.validateFile(n),this.errorMessage)return;const r=new FileReader;r.readAsText(n),r.onload=()=>{try{const l=JSON.parse(r.result);if(this.errorMessage=this.validateQuiz(l),this.errorMessage)return;const g=l.questions.map(O=>new h.v(O));this.questions.push(...g),this.files.push(n.name),this.questions.length>=this.MAX_QUESTIONS&&(this.errorMessage=o.MAX_QUESTIONS_REACHED)}catch(l){console.error("Error parsing JSON:",l),this.errorMessage=o.JSON_PARSE_ERROR}}}validateFile(i){let s="";return"application/json"!==i.type?s=o.INVALID_FILE_TYPE:this.files.includes(i.name)&&(s=o.FILE_ALREADY_UPLOADED),s}validateQuiz(i){let s="";switch(!0){case!i.questions||!Array.isArray(i.questions):s=o.INVALID_QUIZ_FORMAT_MISSING_QUESTIONS;break;case 0===i.questions.length:s=o.QUIZ_CONTAINS_NO_QUESTIONS;break;case!i.questions.every(n=>n.prompt&&n.options&&n.answer):s=o.INVALID_QUIZ_FORMAT_MISSING_PROPERTIES;break;case!i.questions.every(n=>Array.isArray(n.options)&&n.options.length>=2):s=o.INVALID_QUIZ_FORMAT_INSUFFICIENT_OPTIONS;break;case!i.questions.every(n=>n.options.includes(n.answer)):s=o.INVALID_QUIZ_FORMAT_ANSWER_NOT_IN_OPTIONS;break;case this.questions.length+i.questions.length>this.MAX_QUESTIONS:s=`${o.EXCEEDS_QUESTION_LIMIT}${this.MAX_QUESTIONS}.`}return s}clearFiles(){0!==this.files.length&&(this.files=[],this.questions=[],this.errorMessage="")}startQuiz(){0!==this.questions.length&&(this.quizService.setQuestions(this.questions),this.quizService.setIsQuizActive(!0),this.router.navigate(["/quiz"]))}static{this.\u0275fac=function(s){return new(s||t)(e.rXU(d.p),e.rXU(I.Ix))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-quiz-selection"]],decls:14,vars:6,consts:[[1,"grid"],[1,"row"],[1,"col-12","h1","text-center","my-3"],[1,"offset-3","col-6","d-flex","justify-content-center"],["type","file","accept",".json","required","",1,"form-control","my-3",3,"disabled","change"],["class","offset-3 col-6 text-center text-danger",4,"ngIf"],["class","offset-3 col-6",4,"ngIf"],["class","offset-3 col-6 text-center my-3",4,"ngIf"],[1,"offset-3","col-6","d-flex","justify-content-center","my-3"],[1,"btn","btn-secondary","me-3",3,"disabled","click"],[1,"btn","btn-primary",3,"disabled","click"],[1,"offset-3","col-6","text-center","text-danger"],[1,"h6"],[1,"offset-3","col-6"],[1,"h3"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],[1,"offset-3","col-6","text-center","my-3"],[1,"h4"]],template:function(s,n){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"h1",2),e.EFF(3,"Select a Quiz JSON File"),e.k0s(),e.j41(4,"div",3)(5,"input",4),e.bIt("change",function(l){return n.onFileSelected(l)}),e.k0s()(),e.DNE(6,S,3,1,"div",5),e.DNE(7,_,5,1,"div",6),e.DNE(8,E,3,1,"div",7),e.j41(9,"div",8)(10,"button",9),e.bIt("click",function(){return n.clearFiles()}),e.EFF(11,"Clear Files"),e.k0s(),e.j41(12,"button",10),e.bIt("click",function(){return n.startQuiz()}),e.EFF(13,"Start Quiz"),e.k0s()()()()),2&s&&(e.R7$(5),e.Y8G("disabled",n.questions.length>=100),e.R7$(1),e.Y8G("ngIf",n.errorMessage),e.R7$(1),e.Y8G("ngIf",n.files.length>0),e.R7$(1),e.Y8G("ngIf",n.questions.length>0),e.R7$(2),e.Y8G("disabled",0===n.files.length),e.R7$(2),e.Y8G("disabled",0===n.questions.length))},dependencies:[u.Sq,u.bT]})}}return t})()}];let m=(()=>{class t{static{this.\u0275fac=function(s){return new(s||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({imports:[I.iI.forChild(N),I.iI]})}}return t})(),T=(()=>{class t{static{this.\u0275fac=function(s){return new(s||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({imports:[u.MD,m]})}}return t})()}}]);